<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

    <script src="https://p.trellocdn.com/power-up.min.js"></script>
    <script>
        let t;

        // Initialize Trello Power-Up
        t = window.TrelloPowerUp.initialize({
            'board-buttons': function(t, opts) {
                return [{
                    icon: {
                        dark: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTIgMkwxMy4wOSA4LjI2TDIwIDlMMTMuMDkgMTUuNzRMMTIgMjJMMTAuOTEgMTUuNzRMNCBMMTAuOTEgOC4yNkwxMiAyWiIgZmlsbD0iI2ZmYWExMCIvPjwvc3ZnPg==',
                        light: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTIgMkwxMy4wOSA4LjI2TDIwIDlMMTMuMDkgMTUuNzRMMTIgMjJMMTAuOTEgMTUuNzRMNCBMMTAuOTEgOC4yNkwxMiAyWiIgZmlsbD0iI2ZmYWExMCIvPjwvc3ZnPg=='
                    },
                    text: 'Membership Audit',
                    callback: function(t) {
                        t.board('id', 'name', 'memberships')
                            .then(function(board) {
                                if (board && board.memberships && board.memberships.length > 0) {
                                    board.memberships.forEach(function(membership, idx) {
                                        console.log(`Membership ${idx + 1}:`, {
                                            idMember: membership.idMember,
                                            memberType: membership.memberType,
                                            deactivated: membership.deactivated,
                                            unconfirmed: membership.unconfirmed
                                        });
                                    });
                                }
                            })
                            .catch(function(error) {
                                console.error('Error fetching board data:', error);
                            });
                        
                        return null;
                    }
                }];
            },
            'card-buttons': function(t, opts) {
                // Stub implementation - not used for this POC
                return [];
            },
            'card-badges': function(t, opts) {
                // Stub implementation - not used for this POC
                return [];
            },
            'authorization-status': function(t, opts) {
                // Stub implementation - not used for this POC
                return { authorized: false };
            }
        });

        console.log('Power-Up initialized');
    </script>
</body>
</html>
